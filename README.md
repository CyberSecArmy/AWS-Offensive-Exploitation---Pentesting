# AWS Offensive Exploitation - Pentest

This repository mainly focuses on various techniques, tools, frameworks and approach to perform offensive exploitation of AWS infrastructure, its various services and overall AWS cloud penetration testing. It gives an understanding of how to conduct reconnaissance within AWS in order to identify vulnerable services, finding misconfigurations and insecure configurations for various components, and how those vulnerabilities could be used by adversaries to gain unauthorized access.

# Tools and Frameworks

1- Scout Scuite - an automated cloud security auditing tool.

2- Pacu - an AWS attack/exploitation framework (due to be demonstrated in DEFCON 2019).

# 1- Scout Suite

Scout Suite is an automated cloud security auditing tool that helps to assess and identify security misconfigurations. It collects configuration data from the APIs that are exposed by cloud providers and produces a report that highlights potentially vulnerable configurations. The tool works across multiple cloud providers such as AWS, Azure, and
Google Cloud Platform (GCP).

Scout2 is very useful as it allows for a quick assessment of the various security configuration issues within various AWS services and reports them on an easy-to-read dashboard. This helps to identify several low-hanging fruits that might otherwise take longer to detect.

# Configuring and running Scout Suite

To run the tool on our AWS infrastructure, we will have to set up an IAM user with specific permissions to configure the tool. Follow steps as below,

1. Create an IAM user and set access type to "Programmatic Access".
2. Set these two specific policies for the new IAM user, "ReadOnlyAccess" and "SecurityAudit".
3. Note down the "Access key ID" and the "Secret access key" credentials (as those will be required to configure the AWS CLI).
4. Run the AWS CLI tool and configure it with the credentials obtained previously,

   aws configure
   
5. Installing scoutsuite now,

   sudo pip install scoutsuite
   
   Alternatively, download the tool from GitHub repository,
   
   git clone https://github.com/nccgroup/ScoutSuite
   cd ScoutSuite
   sudo pip install -r requirements.txt
   python Scout.py --help (to verify if the tool is working fine)
   
6. Our tool is now ready to run.

# Running Scout Suite Tool

Simply run the following commands,

--> If installed using pip, use the following command:
    Scout aws
    
--> If running the GitHub script, use this command:
    python Scout.py aws
    
The tool will collect data from each and every AWS service, and then analyze the configurations. The tool will generate an HTML report that will be saved in the "scoutsuite-report" folder. If you have already run the tool on your Kali instance running on AWS, you can simply download the files using SCP/WinSCP.

# Additional

Scout Suite also provides us with an option to audit an infrastructure using a custom ruleset instead of its default ruleset. This is very useful as each organization has its own business case in mind while setting up an AWS infrastructure. Using custom rulesets can help organizations customize the tool's assessments according to their needs.

# Summary

We ran "Scout Suite" tool to identify potentially vulnerable configurations in an AWS infrastructure, and then analyse the report to understand how vulnerabilities are reported. It also assists to use customized rulesets to tune the reports in accordance to an organization's need.
